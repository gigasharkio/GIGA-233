{"ast":null,"code":"import _regeneratorRuntime from\"/root/gshark/Three.js/Gigashark-v2/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/root/gshark/Three.js/Gigashark-v2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/root/gshark/Three.js/Gigashark-v2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useMoralis}from'react-moralis';import{getEllipsisTxt}from'../../web3utils';import{Blockie}from'../Blockie';import{NativeBalance}from'../NativeBalance';import{WalletModal}from'../WalletModal';import ConnectButtonStyles from'./ConnectButton.styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var WrapperStyled=ConnectButtonStyles.WrapperStyled,TextStyled=ConnectButtonStyles.TextStyled,ConnectButtonStyled=ConnectButtonStyles.ConnectButtonStyled,AccountInfoStyled=ConnectButtonStyles.AccountInfoStyled,AddressStyled=ConnectButtonStyles.AddressStyled,BalanceBlockStyled=ConnectButtonStyles.BalanceBlockStyled;var ConnectButton=function ConnectButton(_ref){var _ref$moralisAuth=_ref.moralisAuth,moralisAuth=_ref$moralisAuth===void 0?true:_ref$moralisAuth;var _useMoralis=useMoralis(),account=_useMoralis.account,isAuthenticated=_useMoralis.isAuthenticated,logout=_useMoralis.logout,deactivateWeb3=_useMoralis.deactivateWeb3,enableWeb3=_useMoralis.enableWeb3,isWeb3Enabled=_useMoralis.isWeb3Enabled,isInitialized=_useMoralis.isInitialized,isWeb3EnableLoading=_useMoralis.isWeb3EnableLoading,isAuthenticating=_useMoralis.isAuthenticating,authenticate=_useMoralis.authenticate,Moralis=_useMoralis.Moralis;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isConnectModalOpen=_useState2[0],setIsConnectModalOpen=_useState2[1];var _useState3=useState('disconnected'),_useState4=_slicedToArray(_useState3,2),web3Status=_useState4[0],setWeb3Status=_useState4[1];useEffect(function(){// to avoid problems in Next.JS apps because of window object\nif(typeof window=='undefined')return;var connectorId=window.localStorage.getItem('connectorId');if(!isWeb3Enabled&&!isWeb3EnableLoading&&connectorId&&web3Status==='disconnected'){// @ts-ignore\nsetWeb3Status('pending');enableWeb3({provider:connectorId,onSuccess:function onSuccess(){return setWeb3Status('only_web3');}});}},[isWeb3Enabled,isWeb3EnableLoading,web3Status]);useEffect(function(){// to avoid problems in Next.JS apps because of window object\nif(typeof window=='undefined')return;var connectorId=window.localStorage.getItem('connectorId');if(isInitialized&&!isAuthenticated&&!isAuthenticating&&isWeb3Enabled&&moralisAuth&&web3Status==='only_web3'){authenticate({provider:connectorId});}},[isAuthenticated,isInitialized,isWeb3Enabled,isAuthenticating]);useEffect(function(){Moralis.onAccountChanged(function(address){if(!address)disconnectWallet();});},[]);function disconnectWallet(){return _disconnectWallet.apply(this,arguments);}function _disconnectWallet(){_disconnectWallet=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(typeof window=='undefined')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:window.localStorage.removeItem('connectorId');setWeb3Status('disconnected');deactivateWeb3();if(isInitialized)logout();case 6:case\"end\":return _context.stop();}}},_callee);}));return _disconnectWallet.apply(this,arguments);}if(!account||moralisAuth&&isInitialized&&!isAuthenticated){return/*#__PURE__*/_jsxs(WrapperStyled,{children:[/*#__PURE__*/_jsx(ConnectButtonStyled,{onClick:function onClick(){return setIsConnectModalOpen(true);},children:/*#__PURE__*/_jsx(TextStyled,{children:\"Connect Wallet\"})}),/*#__PURE__*/_jsx(WalletModal,{isOpened:isConnectModalOpen,moralisAuth:moralisAuth,setIsOpened:setIsConnectModalOpen})]});}return/*#__PURE__*/_jsx(WrapperStyled,{children:/*#__PURE__*/_jsxs(AccountInfoStyled,{children:[/*#__PURE__*/_jsx(BalanceBlockStyled,{children:/*#__PURE__*/_jsx(NativeBalance,{style:{margin:'0 8px 0 12px'}})}),/*#__PURE__*/_jsxs(AddressStyled,{onClick:function onClick(){return disconnectWallet();},children:[/*#__PURE__*/_jsx(TextStyled,{style:{marginRight:'8px'},children:account&&getEllipsisTxt(account)}),/*#__PURE__*/_jsx(Blockie,{scale:2.5,seed:account})]})]})});};export default ConnectButton;","map":{"version":3,"names":["React","useEffect","useState","useMoralis","getEllipsisTxt","Blockie","NativeBalance","WalletModal","ConnectButtonStyles","WrapperStyled","TextStyled","ConnectButtonStyled","AccountInfoStyled","AddressStyled","BalanceBlockStyled","ConnectButton","moralisAuth","account","isAuthenticated","logout","deactivateWeb3","enableWeb3","isWeb3Enabled","isInitialized","isWeb3EnableLoading","isAuthenticating","authenticate","Moralis","isConnectModalOpen","setIsConnectModalOpen","web3Status","setWeb3Status","window","connectorId","localStorage","getItem","provider","onSuccess","onAccountChanged","address","disconnectWallet","removeItem","margin","marginRight"],"sources":["/root/gshark/Three.js/Gigashark-v2/src/components/web3uikit/src/components/ConnectButton/ConnectButton.tsx"],"sourcesContent":["import { default as MoralisType } from 'moralis/types';\nimport React, { useEffect, useState } from 'react';\nimport { useMoralis } from 'react-moralis';\nimport { getEllipsisTxt } from '../../web3utils';\nimport { Blockie } from '../Blockie';\nimport { NativeBalance } from '../NativeBalance';\nimport { WalletModal } from '../WalletModal';\nimport ConnectButtonStyles from './ConnectButton.styles';\nimport { ConnectButtonProps } from './types';\n\nconst {\n    WrapperStyled,\n    TextStyled,\n    ConnectButtonStyled,\n    AccountInfoStyled,\n    AddressStyled,\n    BalanceBlockStyled,\n} = ConnectButtonStyles;\n\ntype web3StatusType = 'disconnected' | 'pending' | 'only_web3';\n\nconst ConnectButton: React.FC<ConnectButtonProps> = ({\n    moralisAuth = true,\n}) => {\n    const {\n        account,\n        isAuthenticated,\n        logout,\n        deactivateWeb3,\n        enableWeb3,\n        isWeb3Enabled,\n        isInitialized,\n        isWeb3EnableLoading,\n        isAuthenticating,\n        authenticate,\n        Moralis,\n    } = useMoralis();\n\n    const [isConnectModalOpen, setIsConnectModalOpen] = useState(false);\n    const [web3Status, setWeb3Status] =\n        useState<web3StatusType>('disconnected');\n\n    useEffect(() => {\n        // to avoid problems in Next.JS apps because of window object\n        if (typeof window == 'undefined') return;\n\n        const connectorId = window.localStorage.getItem(\n            'connectorId',\n        ) as MoralisType.Web3ProviderType;\n        if (\n            !isWeb3Enabled &&\n            !isWeb3EnableLoading &&\n            connectorId &&\n            web3Status === 'disconnected'\n        ) {\n            // @ts-ignore\n            setWeb3Status('pending');\n            enableWeb3({\n                provider: connectorId,\n                onSuccess: () => setWeb3Status('only_web3'),\n            });\n        }\n    }, [isWeb3Enabled, isWeb3EnableLoading, web3Status]);\n\n    useEffect(() => {\n        // to avoid problems in Next.JS apps because of window object\n        if (typeof window == 'undefined') return;\n\n        const connectorId = window.localStorage.getItem(\n            'connectorId',\n        ) as MoralisType.Web3ProviderType;\n        if (\n            isInitialized &&\n            !isAuthenticated &&\n            !isAuthenticating &&\n            isWeb3Enabled &&\n            moralisAuth &&\n            web3Status === 'only_web3'\n        ) {\n            authenticate({ provider: connectorId });\n        }\n    }, [isAuthenticated, isInitialized, isWeb3Enabled, isAuthenticating]);\n\n    useEffect(() => {\n        Moralis.onAccountChanged((address) => {\n            if (!address) disconnectWallet();\n        });\n    }, []);\n\n    async function disconnectWallet() {\n        // to avoid problems in Next.JS apps because of localStorage\n        if (typeof window == 'undefined') return;\n\n        window.localStorage.removeItem('connectorId');\n        setWeb3Status('disconnected');\n\n        deactivateWeb3();\n        if (isInitialized) logout();\n    }\n\n    if (!account || (moralisAuth && isInitialized && !isAuthenticated)) {\n        return (\n            <WrapperStyled>\n                <ConnectButtonStyled\n                    onClick={() => setIsConnectModalOpen(true)}\n                >\n                    <TextStyled>Connect Wallet</TextStyled>\n                </ConnectButtonStyled>\n                <WalletModal\n                    isOpened={isConnectModalOpen}\n                    moralisAuth={moralisAuth}\n                    setIsOpened={setIsConnectModalOpen}\n                />\n            </WrapperStyled>\n        );\n    }\n\n    return (\n        <WrapperStyled>\n            <AccountInfoStyled>\n                <BalanceBlockStyled>\n                    <NativeBalance style={{ margin: '0 8px 0 12px' }} />\n                </BalanceBlockStyled>\n                <AddressStyled onClick={() => disconnectWallet()}>\n                    <TextStyled style={{ marginRight: '8px' }}>\n                        {account && getEllipsisTxt(account)}\n                    </TextStyled>\n                    <Blockie scale={2.5} seed={account} />\n                </AddressStyled>\n            </AccountInfoStyled>\n        </WrapperStyled>\n    );\n};\n\nexport default ConnectButton;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}